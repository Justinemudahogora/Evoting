<!Doctype HTML>
	<html>
	<head>
		<title></title>
		<link rel="stylesheet" href="css/stylee.css" type="text/css"/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<script src="http://kit.fontawesome.com/278cdbab1b.js"></script>
    </head>


	<body>
	<div id="mySidenav"	 class="sidenav">
<p class="logo"><span>E</span>Voting</p>
<a href="#" class="icon-a"><i class="fa fa-dashboard icons"></i>&nbsp;&nbsp;Dashboard</a>
<a href="candidates.html" class="icon-a"><i class="fa fa-users icons"></i>&nbsp;&nbsp;Manage Candidates</a>
<a href="voters.html" class="icon-a"><i class="fa fa-users icons"></i>&nbsp;&nbsp;Voters</a>







			

</div>
			</div>
		
	<div id="main">

		<div class="head">
			<div class="col-div-6">
	<span style="font-size:30px;cursor:pointer; color:#eee;" class="nav"  >☰ Dashboard</span>
	<span style="font-size:30px;cursor:pointer; color:#eee;" class="nav2"  >☰ Dashboard</span>
	
	</div>
		
		<div class="col-div-6">
	
	</div>
		<div class="clearfix"></div>
	</div>

		<div class="clearfix">
			
		</div>
		<br/>
		
		<div class="col-div-3">
			<div class="box">
				<p><span id="voters" style="font-size:40px; color: #043158;font-weight: bold;"></span><br/><span>Voters</span></p>
				<i class="fa fa-users box-icon"></i>
			</div>
		</div>
		<div class="col-div-3">
			<div class="box">
				<p><span id="candidates" style="font-size:40px; color: #043158;font-weight: bold;"></span><br/><span>Candidates</span></p>
				<i class="fa fa-users box-icon"></i>
			</div>
		</div>
		<div class="col-div-3">
			<div class="box">
				<p><span id="votes" style="font-size:40px; color: #043158;font-weight: bold;"></span><br/><span>Votes</span></p>
				<i class="fa  box-icon">&#xf772;</i>
			</div>
		</div>
		
		<div class="clearfix"></div>
		<br/><br/>
		<div class ="col-div-8">
			<div class="box-8">
				<div class="content-box">
					<b><p>How's Election Going</p></b>
					<br/>
					<canvas id="my_chart"height="90"></canvas>
			</div>
		</div>

		
			
		<div class="clearfix"></div>
	</div>

	<script src="https://kit.fontawesome.com/be7d918b50.js" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js"></script>
	

    
	<script>

	  $(".nav").click(function(){
	    $("#mySidenav").css('width','70px');
	    $("#main").css('margin-left','70px');
	    $(".logo").css('visibility', 'hidden');
	    $(".logo span").css('visibility', 'visible');
	     $(".logo span").css('margin-left', '-10px');
	     $(".icon-a").css('visibility', 'hidden');
	     $(".icons").css('visibility', 'visible');
	     $(".icons").css('margin-left', '-8px');
	      $(".nav").css('display','none');
	      $(".nav2").css('display','block');
	  });

	$(".nav2").click(function(){
	    $("#mySidenav").css('width','300px');
	    $("#main").css('margin-left','300px');
	    $(".logo").css('visibility', 'visible');
	     $(".icon-a").css('visibility', 'visible');
	     $(".icons").css('visibility', 'visible');
	     $(".nav").css('display','block');
	      $(".nav2").css('display','none');
	 });
// javascript for index.html
const conteiner = document.querySelector('.candidates');
const voteBtn=document.querySelector('.voteBtn');
const url = 'http://localhost:3000/candidates/';
var sum=0;
const getingcandidate = async () => {
	var my_candidates=[]
var my_data=[]
var my_votes=[]
var my_voters=[]
  const res = await fetch(url);
  const candidates_ = await res.json();
  const candidates = candidates_.sort(function(a,b){
    return b.votes - a.votes;
  });
  const voter=await fetch( 'http://localhost:3000/myEmail/');
  const voters_=await voter.json();
  const voters=voters_.sort(function(a,b){
	  return b.id -a.id;
  });

  for (var i=0;i<candidates.length;i++){
    my_candidates.push(candidates[i].fname+candidates[i].lname)}
   
    for (var i=0;i<candidates.length;i++){
      my_data.push(parseInt(candidates[i].votes))}
	for (var i=0;i<candidates.length;i++){
		my_votes.push(parseInt(candidates[i].votes))
		
	sum=sum+parseInt(my_votes[i])
	}
	for (var i=0;i<voters.length;i++){
    my_voters.push(voters[i].email)}
   

  let template = '';

 


console.log( parseInt(sum))
document.getElementById('votes').innerHTML=sum
document.getElementById('candidates').innerHTML=candidates.length
document.getElementById('voters').innerHTML=voters.length



  var my_chart=document.getElementById('my_chart').getContext('2d')
 

					var barChart=new Chart(my_chart,{
						type:'line',
						data:{
							labels:my_candidates,
							datasets:[{
								label:'votes',
								data:my_data,
								backgroundColor:['#4974a5','#b48b3d' , '#849684', '#926ce9', '#685374', 
												'#043058', '#3366E6', '#999966', '#99FF99','#B34D4D' ,
												'#80B300', '#FFB399']
              
							}]
						},
						options:{},
					})
console.log(votes)		

};

    window.addEventListener('DOMContentLoaded', () => getingcandidate());


	</script>

	</body>


	</html>